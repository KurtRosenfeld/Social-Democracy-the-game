<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Germany 1890-1920 | SPD Simulator</title>
    <link rel="stylesheet" href="game.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- REMOVED: Inline styles for year progress bar -->
</head>
<body>
    <!-- HEADER -->
    <header id="game-header">
        <div class="header-left">
            <h1 id="game-title">Germany 1890-1920</h1>
            <p id="game-subtitle">SPD Political Simulator</p>
        </div>
        <div class="header-center">
            <!-- CHANGED: Use existing CSS classes -->
            <div id="date-display">
                <span id="current-date">September 1890</span>
                <div id="date-progress">
                    <div id="date-progress-bar"></div>
                </div>
            </div>
        </div>
        <div class="header-right">
            <button class="header-btn" onclick="alert('Save feature coming soon')">
                <i class="fas fa-save"></i> Save
            </button>
            <button class="header-btn" onclick="alert('Load feature coming soon')">
                <i class="fas fa-folder-open"></i> Load
            </button>
            <!-- ADDED: Map toggle button -->
            <button class="header-btn" id="toggle-map-btn" title="Toggle map view">
                <i class="fas fa-map"></i> Map
            </button>
        </div>
    </header>

    <!-- MAIN GAME AREA -->
    <main id="game-main">
        <!-- LEFT SIDEBAR: Quick Stats -->
        <aside id="sidebar-left">
            <div class="stat-box">
                <h3><i class="fas fa-chart-line"></i> Party Status</h3>
                <div class="stat">
                    <span class="stat-label">Members:</span>
                    <span class="stat-value" id="stat-members">100,000</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Reichstag Seats:</span>
                    <span class="stat-value" id="stat-seats">35</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Treasury:</span>
                    <span class="stat-value" id="stat-funds">50,000â„³</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Influence:</span>
                    <span class="stat-value" id="stat-influence">65%</span>
                </div>
            </div>

            <!-- CHANGED: Removed faction display from here -->
            <!-- It will now appear in the Party tab instead -->
            
            <!-- ADDED: Timeline section -->
            <div class="stat-box">
                <h3><i class="fas fa-history"></i> Timeline</h3>
                <div class="timeline">
                    <div class="timeline-item current">
                        <div class="timeline-date">1890</div>
                        <div class="timeline-event">Anti-Socialist Laws lifted</div>
                    </div>
                    <div class="timeline-item future">
                        <div class="timeline-date">1914</div>
                        <div class="timeline-event">World War I begins</div>
                    </div>
                    <div class="timeline-item future">
                        <div class="timeline-date">1918</div>
                        <div class="timeline-event">German Revolution</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- CENTER: Main Event/Decision Area -->
        <section id="main-scene">
            <div id="event-container">
                <h2 id="event-title">Event Title Goes Here</h2>
                <div id="event-date">Date Here</div>
                
                <div id="event-content">
                    <p>Event description text goes here. This is where historical events and decisions appear.</p>
                    <p>Add your narrative text here.</p>
                </div>

                <div id="event-choices">
                    <h3>Your Decision:</h3>
                    <!-- Choices will be inserted here by JavaScript -->
                    <div class="choice-placeholder">
                        <p><i>Decision buttons will appear here</i></p>
                    </div>
                </div>
            </div>
            
            <!-- ADDED: Map container (hidden by default) -->
            <div id="map-container" style="display: none; height: 100%;">
                <div class="map-placeholder" style="text-align: center; padding: 60px 20px; color: #888;">
                    <i class="fas fa-map-marked-alt fa-3x" style="margin-bottom: 20px; opacity: 0.3;"></i>
                    <h3>Interactive Map</h3>
                    <p>Load JSON map data to display German states or electoral districts.</p>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.1); border-radius: 5px;">
                        <p><small>Map data placeholder for future JSON integration</small></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- RIGHT SIDEBAR: Tabs Navigation -->
        <aside id="sidebar-right">
            <!-- Tab Navigation -->
            <nav id="tab-nav">
                <button class="tab-btn active" data-tab="main">
                    <i class="fas fa-home"></i> Main
                </button>
                <button class="tab-btn" data-tab="government">
                    <i class="fas fa-landmark"></i> Government
                </button>
                <button class="tab-btn" data-tab="party">
                    <i class="fas fa-users"></i> Party
                </button>
                <button class="tab-btn" data-tab="status">
                    <i class="fas fa-chart-bar"></i> Status
                </button>
                <button class="tab-btn" data-tab="politics">
                    <i class="fas fa-handshake"></i> Politics
                </button>
                <!-- ADDED: Map tab -->
                <button class="tab-btn" data-tab="map">
                    <i class="fas fa-map"></i> Map
                </button>
            </nav>

            <!-- Tab Content Area -->
            <div id="tab-content">
                <div class="tab-pane active" id="tab-main">
                    <h3>Main Game Controls</h3>
                    <p>This area shows information about the current game state.</p>
                    <p>Use the buttons above to navigate to different game sections.</p>
                </div>

                <div class="tab-pane" id="tab-government">
                    <h3>Government & Reichstag</h3>
                    <p>Reichstag seat visualization and government actions will appear here.</p>
                    <div class="placeholder">
                        <p><i class="fas fa-chart-pie fa-2x"></i></p>
                        <p>Government features coming soon</p>
                    </div>
                </div>

                <div class="tab-pane" id="tab-party">
                    <h3>Party Management</h3>
                    <!-- ADDED: Faction display moved here -->
                    <div class="faction-display" style="margin: 15px 0;">
                        <div style="display: flex; height: 30px; border-radius: 4px; overflow: hidden; margin-bottom: 10px;">
                            <div class="faction-radical" style="width: 45%; background: #e63946; color: white; display: flex; align-items: center; padding-left: 10px; font-weight: bold;">
                                Radicals: 45%
                            </div>
                            <div class="faction-moderate" style="width: 55%; background: #457b9d; color: white; display: flex; align-items: center; padding-left: 10px; font-weight: bold;">
                                Moderates: 55%
                            </div>
                        </div>
                    </div>
                    <p>Party leadership, advisors, and faction management will appear here.</p>
                    <div class="placeholder">
                        <p><i class="fas fa-user-tie fa-2x"></i></p>
                        <p>Party management features coming soon</p>
                    </div>
                </div>

                <div class="tab-pane" id="tab-status">
                    <h3>Status Overview</h3>
                    <p>Game statistics, trends, and timeline will appear here.</p>
                    <div class="placeholder">
                        <p><i class="fas fa-chart-line fa-2x"></i></p>
                        <p>Status features coming soon</p>
                    </div>
                </div>

                <div class="tab-pane" id="tab-politics">
                    <h3>Politics & Relations</h3>
                    <p>Party relations and public opinion will appear here.</p>
                    <div class="placeholder">
                        <p><i class="fas fa-handshake fa-2x"></i></p>
                        <p>Politics features coming soon</p>
                    </div>
                </div>
                
                <!-- ADDED: Map tab content -->
                <div class="tab-pane" id="tab-map">
                    <h3><i class="fas fa-map"></i> Map Controls</h3>
                    <p>Control map display and load JSON map data.</p>
                    
                    <div class="map-controls" style="margin: 15px 0;">
                        <button class="map-control-btn" onclick="toggleMapView()" style="width: 100%; margin-bottom: 10px;">
                            <i class="fas fa-eye"></i> Toggle Map View
                        </button>
                        
                        <div style="margin: 15px 0; padding: 10px; background: rgba(0,0,0,0.1); border-radius: 5px;">
                            <h4>Map Data</h4>
                            <p><small>Load JSON map files for:</small></p>
                            <ul style="font-size: 0.9rem; color: #aaa;">
                                <li>German States (1890 borders)</li>
                                <li>Reichstag electoral districts</li>
                                <li>Party support by region</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </main>

    <!-- FOOTER -->
    <footer id="game-footer">
        <div class="footer-left">
            <span id="current-event-display">Current: No event</span>
        </div>
        <div class="footer-center">
            <button id="next-turn-btn" class="primary-btn">
                <i class="fas fa-forward"></i> Advance Time
            </button>
        </div>
        <div class="footer-right">
            <span id="game-version">v0.1.0 | Development Build</span>
        </div>
    </footer>

    <!-- GAME JAVASCRIPT -->
    <script src="game.js"></script>
    
    <!-- Initialize Game -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the game
            if (window.game) {
                window.game.initialize();
            }
            
            // Setup tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    
                    // Update active button
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected tab
                    document.querySelectorAll('.tab-pane').forEach(pane => {
                        pane.classList.remove('active');
                    });
                    document.getElementById('tab-' + tabName).classList.add('active');
                });
            });
            
            // ADDED: Map toggle button functionality
            document.getElementById('toggle-map-btn').addEventListener('click', toggleMapView);
        });
        
        // ADDED: Map toggle function
        function toggleMapView() {
            const eventContainer = document.getElementById('event-container');
            const mapContainer = document.getElementById('map-container');
            const mapBtn = document.getElementById('toggle-map-btn');
            
            if (eventContainer.style.display !== 'none') {
                // Switch to map view
                eventContainer.style.display = 'none';
                mapContainer.style.display = 'block';
                mapBtn.innerHTML = '<i class="fas fa-scroll"></i> Events';
                mapBtn.title = 'Switch back to events view';
            } else {
                // Switch to event view
                eventContainer.style.display = 'block';
                mapContainer.style.display = 'none';
                mapBtn.innerHTML = '<i class="fas fa-map"></i> Map';
                mapBtn.title = 'Toggle map view';
            }
        }
        
        // CHANGED: Update date progress bar function
        function updateDateProgress(month) {
            // month is 1-12
            const progress = ((month - 1) / 12) * 100;
            const progressBar = document.getElementById('date-progress-bar');
            if (progressBar) {
                progressBar.style.width = Math.min(Math.max(progress, 0), 100) + '%';
            }
        }
        
        // CHANGED: Update year progress function
        function updateYearProgress(year) {
            // 1890-1920 = 30 years
            const progress = ((year - 1890) / 30) * 100;
            const progressBar = document.getElementById('date-progress-bar');
            if (progressBar) {
                // Update progress bar width (still using date-progress-bar)
                progressBar.style.width = Math.min(Math.max(progress, 0), 100) + '%';
            }
        }
        
        // Example: Call these when time advances
        // updateDateProgress(3); // For month-based progress
        // updateYearProgress(1895); // For year-based progress
    </script>
</body>
</html>
